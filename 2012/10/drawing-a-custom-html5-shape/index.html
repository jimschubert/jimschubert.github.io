<!DOCTYPE html>
<html lang="en">
    
    


    <head>
    <link href="https://gmpg.org/xfn/11" rel="profile">
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Cache-Control" content="public" />
<!-- Enable responsiveness on mobile devices -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="generator" content="Hugo 0.72.0" />

    
    
    

<title>Drawing a custom HTML5 shape • I Prefer Jim</title>


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Drawing a custom HTML5 shape"/>
<meta name="twitter:description" content="HTML5 is fun. I’ve meant to post about it more than I have in the past (which is 0 posts). I recently got the urge, so I want to show how to draw a heart and a star on HTML5 canvas."/>

<meta property="og:title" content="Drawing a custom HTML5 shape" />
<meta property="og:description" content="HTML5 is fun. I’ve meant to post about it more than I have in the past (which is 0 posts). I recently got the urge, so I want to show how to draw a heart and a star on HTML5 canvas." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.ipreferjim.com/2012/10/drawing-a-custom-html5-shape/" />
<meta property="article:published_time" content="2012-10-04T16:48:28+00:00" />
<meta property="article:modified_time" content="2012-10-04T16:48:28+00:00" /><meta property="og:site_name" content="I Prefer Jim" />


    


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">








<link rel="stylesheet" href="/scss/hyde-hyde.1d734ca591261200417c9d5de423a667cc5271b6576cc2ea477fce0dd8c628d0.css">


<link rel="stylesheet" href="/scss/print.2744dcbf8a0b2e74f8a50e4b34e5f441be7cf93cc7de27029121c6a09f9e77bc.css" media="print">




<link rel="stylesheet" href="/scss/hugo-toc.11a9185f83b7761946f8d16ae214f4d959edaf003337338e55935920cc7852d7.css">



    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="/favicon.png">
    
    

</head>


    <body class=" ">
    
<div class="sidebar">
  <div class="container ">
    <div class="sidebar-about">
      <span class="site__title">
        <a href="https://www.ipreferjim.com/">I Prefer Jim</a>
      </span>
      
      
        <div class="author-image">
          <img src="https://www.gravatar.com/avatar/466dc28e15028c7353552022d2de1f9e?s=240&d=mp" class="img--circle img--headshot element--center" alt="gravatar">
        </div>
      
      <p class="site__description">
        
      </p>
    </div>
    <div class="collapsible-menu">
      <input type="checkbox" id="menuToggle">
      <label for="menuToggle">I Prefer Jim</label>
      <div class="menu-content">
        <div>
	<ul class="sidebar-nav">
		 
		 
			 
				<li>
					<a href="/posts/">
						<span>Posts</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/tags/">
						<span>Tags</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/categories/">
						<span>Categories</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/books/">
						<span>Books</span>
					</a>
				</li>
			 
		
	</ul>
</div>

        <section class="social">
	
	<a href="https://twitter.com/jimschubert" rel="me"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a>
	
	
	
	<a href="https://github.com/jimschubert" rel="me"><i class="fab fa-github fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	
	<a href="https://linkedin.com/in/jamesschubert" rel="me"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a>
	
	
	<a href="https://stackoverflow.com/users/151445" rel="me"><i class="fab fa-stack-overflow fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	
	
</section>

      </div>
    </div>
    
<div class="copyright">
  &copy; 2020 Jim Schubert
  
    <a href="https://creativecommons.org/licenses/by-sa/4.0">CC BY-SA 4.0</a>
  
</div>


<div class="builtwith">
Built with <a href="https://gohugo.io">Hugo</a> ❤️ <a href="https://github.com/htr3n/hyde-hyde">hyde-hyde</a>.
</div>


  </div>
</div>

        <div class="content container">
            
    
<article>
  <header>
    <h1>Drawing a custom HTML5 shape</h1>
    
    
<div class="post__meta">
    
    
      <i class="fas fa-calendar-alt"></i> Oct 4, 2012
    
    
    
      
      
          in
          
          
              <a class="badge badge-category" href="/categories/blog">BLOG</a>
              
          
      
    
    
    
      
      
          <br/>
           <i class="fas fa-tags"></i>
          
          <a class="badge badge-tag" href="/tags/html5">html5</a>
           
      
          <a class="badge badge-tag" href="/tags/javascript">javascript</a>
          
      
    
    
    <br/>
    <i class="fas fa-clock"></i> 4 min read
</div>


  </header>
  
  
  
  
  <div class="post">
    <p>HTML5 is fun. I’ve meant to post about it more than I have in the past (which is 0 posts). I recently got the urge, so I want to show how to draw a heart and a star on HTML5 canvas.</p>
<h2 id="some-background">Some background</h2>
<p>A few days ago, I heard about <a href="http://www.typescriptlang.org/" title="typescript" target="_blank">typescript</a>, which is a typed superset of JavaScript. It’s similar to coffeescript, dart, and others in that it defines a language which compiles down to plain JavaScript. It’s different than most because it gives JavaScript the concept of types and compile-time type checking. The compiler is available cross-platform, but the IDE tools are only available for Visual Studio 2012 or in-browser on the website.</p>
<p>Anyway, I wanted to play around with typescript so I decided to see how easily I could convert <a href="https://github.com/jimschubert/brushes.js" title="brushes.js on github" target="_blank">brushes.js</a> to use some of the typed semantics of typescript. It wasn’t too difficult and the code actually looks way cleaner in typescript. The only issue I’ve found is that types are not inferred 100% accurately at times. For instance, <a href="https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByTagName" title="getElementsByTagName on Mozilla Developer Network" target="_blank">document.getElementsByTagName</a> returns a NodeList. Indexed elements are considered Node elements and <em>not</em> a more specific type. An example, you would expect the following snippet to compile properly:</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="k">if</span><span class="p">(</span><span class="nx">$tag</span><span class="p">)</span> <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">canvas</span> <span class="o">=</span> <span class="nx">$tag</span><span class="p">(</span><span class="s1">&#39;canvas&#39;</span><span class="p">)</span> <span class="o">?</span> <span class="nx">$tag</span><span class="p">(</span><span class="s1">&#39;canvas&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>
	<span class="k">if</span><span class="p">(</span><span class="nx">canvas</span> <span class="o">&amp;&amp;</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">context</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s2">&#34;2d&#34;</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>Unfortunately, you’re presented with a message that says <em>getContext</em> doesn’t exist on Node.</p>
<p><a href="https://www.ipreferjim.com/wp-content/uploads/2012/10/Selection_010.png"><img src="https://www.ipreferjim.com/wp-content/uploads/2012/10/Selection_010.png" alt="typescript Node select message" title="typescript Node select message" width="612" height="128" class="aligncenter size-full wp-image-965" srcset="https://www.ipreferjim.com/wp-content/uploads/2012/10/Selection_010.png 612w, https://www.ipreferjim.com/wp-content/uploads/2012/10/Selection_010-300x62.png 300w" sizes="(max-width: 612px) 100vw, 612px" /></a></p>
<p>To remove this message, you need to do something I personally don’t like doing (although it’s completely legal in JavaScript)– access the function by key.</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="k">if</span><span class="p">(</span><span class="nx">$tag</span><span class="p">)</span> <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">canvas</span> <span class="o">=</span> <span class="nx">$tag</span><span class="p">(</span><span class="s1">&#39;canvas&#39;</span><span class="p">)</span> <span class="o">?</span> <span class="nx">$tag</span><span class="p">(</span><span class="s1">&#39;canvas&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>
	<span class="k">if</span><span class="p">(</span><span class="nx">canvas</span> <span class="o">&amp;&amp;</span> <span class="nx">canvas</span><span class="p">[</span><span class="s2">&#34;getContext&#34;</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">canvas</span><span class="p">[</span><span class="s2">&#34;getContext&#34;</span><span class="p">]</span> <span class="o">===</span> <span class="s2">&#34;function&#34;</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">context</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">[</span><span class="s2">&#34;getContext&#34;</span><span class="p">](</span><span class="s2">&#34;2d&#34;</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>Aside from this little problem, I found the coding experience to be beneficial and fun. In fact, while modifying some of the code for the brushes (hearts and stars), I was motivated to write a blog post showing how to create some basic custom shapes in HTML5…</p>
<h2 id="html5">HTML5</h2>
<p>The awesome thing about HTML5 is that you now have a drawing area natively embedded directly into HTML. That’s pretty awesome because it opens up the browser to do some really awesome stuff. There are some pretty phenomenal examples of the power of HTML5 (sometimes mixed with WebGL) at <a href="www.chromeexperiments.com" title="www.chromeexperiments.com" target="_blank">chromeexperiments.com</a>. In fact, I had the urge to start working on brushes.js after playing with an experiment called Harmony by MrDoob. MrDoob has since moved onto creating the hugely-popular <a href="http://mrdoob.github.com/three.js/" title="three.js" target="_blank">three.js</a>. With those two links, I think you can get lost for hours in the power of the browser. If you’re just getting started with some of the new HTML5 APIs, you may want to check out <a href="http://html5demos.com/" title="html5demos.com" target="_blank">remy’s HTML5 demos</a>.</p>
<h2 id="drawingfigure-stylewidth-703px-classwp-caption-aligncenter">Drawing<figure style="width: 703px" class="wp-caption aligncenter"></h2>
<p><a href="http://xkcd.com/1029/"><img alt="How to draw a star on xkcd.com" src="https://imgs.xkcd.com/comics/drawing_stars.png" title="How to draw a star on xkcd.com" width="703" height="208" /></a><figcaption class="wp-caption-text">Image courtesy of xkcd.com</figcaption></figure></p>
<p>Drawing is nothing new in programming. You can easily find algorithms for drawing specific shapes on game dev sites. In fact, I believe I found the algorithm for the star in a C++ game programming book I purchased but haven’t gotten around to reading fully.</p>
<p>The HTML5 canvas is a grid in which (0,0) is in the top-let corner of the grid. It is easiest to draw shapes starting at the origin, then move them into place when you’re done. The canvas API makes this easy using the <a href="https://developer.mozilla.org/en-US/docs/Canvas_tutorial/Transformations#A_translate_example" title="translate on MDN" target="_blank">translate</a> function. Suppose you want to draw an image at (100,100). Using <em>context.translate(100,100)</em> (where <em>context</em> is the 2d drawing context of your canvas element) will cause the drawing context to temporarily set the origin at (100,100), allowing you to draw easily without the headache of calculating offsets.</p>
<p>The steps necessary to draw a simple shape are as follows:</p>
<ol>
<li>Query the dom for the canvas element</li>
<li>Call <em>context.getContext(“2d”)</em> on canvas element</li>
<li>Save the context</li>
<li>Translate context origin to desired location</li>
<li>Set additional properties on the context</li>
<li>Call <em>context.beginPath()</em></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Canvas_tutorial/Drawing_shapes" title="Canvas - Drawing Shapes on MDN" target="_blank">Draw your shapes</a></li>
<li>Stroke or fill your shape</li>
<li>Call <em>context.closePath()</em> to indicate drawing has completed</li>
<li>Call <em>context.restore()</em> to restore the previously saved context</li>
</ol>
<p>This may seem like quite a bit. For an example, I’ve created a <a href="http://jsfiddle.net/jimschubert/cBu9a/1/" title="HTML5 shapes" target="_blank">jsfiddle</a> so you can play around and see the above steps in action.</p>
<h3 id="try-it">Try it</h3>
<iframe style="width: 100%; height: 300px" src="https://jsfiddle.net/jimschubert/cBu9a/1/embedded/" allowfullscreen="allowfullscreen" frameborder="0"></iframe>
<h3 id="code">Code</h3>
<p>The code for this blog post is available on github at <a href="https://github.com/jimschubert/blogs/tree/master/2012-10-04" title="gh:jimschubert/blogs">jimschubert/blogs</a></p>

  </div>
  

<div class="navigation navigation-single">
    
    <a href="/2012/09/my-review-of-hilary-mason-advanced-machine-learning/" class="navigation-prev">
      <i aria-hidden="true" class="fa fa-chevron-left"></i>
      <span class="navigation-tittle">My Review of Hilary Mason: Advanced Machine Learning</span>
    </a>
    
    
    <a href="/2012/10/getting-started-with-jquery-plugins/" class="navigation-next">
      <span class="navigation-tittle">Getting started with jQuery plugins</span>
      <i aria-hidden="true" class="fa fa-chevron-right"></i>
    </a>
    
</div>


  


<div class="post__related">
    
    <h2>Related Articles</h2>
    <ul class="related-posts">
        
<li>
  <span class="list__title--small">
    <a href="/2012/04/node-js-simple-logging-in-tweeter-js/" >[node.js] Simple Logging in tweeter.js</a>
      
      <time class="pull-right hidden-tablet">Apr 30, 2012</time>
      
  </span>
</li>

<li>
  <span class="list__title--small">
    <a href="/2011/11/my-review-of-javascript-the-definitive-guide-6th-edition/" >My Review of JavaScript: The Definitive Guide, 6th Edition</a>
      
      <time class="pull-right hidden-tablet">Nov 8, 2011</time>
      
  </span>
</li>

<li>
  <span class="list__title--small">
    <a href="/2011/10/jquery-plugin-fixed-table-header/" >jQuery plugin: fixed table header</a>
      
      <time class="pull-right hidden-tablet">Oct 31, 2011</time>
      
  </span>
</li>

<li>
  <span class="list__title--small">
    <a href="/2011/09/makefile-setup-for-minifying-js-files-in-an-expressjs-application/" >Makefile setup for minifying .js files in an expressjs application</a>
      
      <time class="pull-right hidden-tablet">Sep 29, 2011</time>
      
  </span>
</li>

<li>
  <span class="list__title--small">
    <a href="/2011/09/editing-javascript-in-vim/" >Editing JavaScript in vim</a>
      
      <time class="pull-right hidden-tablet">Sep 5, 2011</time>
      
  </span>
</li>


    </ul>
</div>



  
    


</article>


        </div>
        
    

<script defer src="https://use.fontawesome.com/releases/v5.11.2/js/all.js" integrity="sha384-b3ua1l97aVGAPEIe48b4TC60WUQbQaGi2jqAWM90y0OZXZeyaTCWtBTKtjW2GXG1" crossorigin="anonymous"></script>


    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
        
    <script type="text/javascript">
        
        hljs.initHighlightingOnLoad();
    </script>
    





    



    </body>
</html>
