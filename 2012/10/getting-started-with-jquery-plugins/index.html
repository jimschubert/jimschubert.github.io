<!DOCTYPE html>
<html lang="en">
    
    


    <head>
    <link href="https://gmpg.org/xfn/11" rel="profile">
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Cache-Control" content="public" />
<!-- Enable responsiveness on mobile devices -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="generator" content="Hugo 0.72.0" />

    
    
    

<title>Getting started with jQuery plugins • I Prefer Jim</title>


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Getting started with jQuery plugins"/>
<meta name="twitter:description" content="jQuery plugins aren’t that difficult to write, but some folks seem to have a hard time understanding how to get started, so I thought I would write a quick blog post about that."/>

<meta property="og:title" content="Getting started with jQuery plugins" />
<meta property="og:description" content="jQuery plugins aren’t that difficult to write, but some folks seem to have a hard time understanding how to get started, so I thought I would write a quick blog post about that." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.ipreferjim.com/site/2012/10/getting-started-with-jquery-plugins/" />
<meta property="article:published_time" content="2012-10-14T01:57:52+00:00" />
<meta property="article:modified_time" content="2012-10-14T01:57:52+00:00" /><meta property="og:site_name" content="I Prefer Jim" />


    


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">








<link rel="stylesheet" href="/site/scss/hyde-hyde.1d734ca591261200417c9d5de423a667cc5271b6576cc2ea477fce0dd8c628d0.css">


<link rel="stylesheet" href="/site/scss/print.2744dcbf8a0b2e74f8a50e4b34e5f441be7cf93cc7de27029121c6a09f9e77bc.css" media="print">




<link rel="stylesheet" href="/site/scss/hugo-toc.11a9185f83b7761946f8d16ae214f4d959edaf003337338e55935920cc7852d7.css">



    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="/favicon.png">
    
    

</head>


    <body class=" ">
    
<div class="sidebar">
  <div class="container ">
    <div class="sidebar-about">
      <span class="site__title">
        <a href="https://www.ipreferjim.com/site/">I Prefer Jim</a>
      </span>
      
      
        <div class="author-image">
          <img src="https://www.gravatar.com/avatar/466dc28e15028c7353552022d2de1f9e?s=240&d=mp" class="img--circle img--headshot element--center" alt="gravatar">
        </div>
      
      <p class="site__description">
        
      </p>
    </div>
    <div class="collapsible-menu">
      <input type="checkbox" id="menuToggle">
      <label for="menuToggle">I Prefer Jim</label>
      <div class="menu-content">
        <div>
	<ul class="sidebar-nav">
		 
		 
			 
				<li>
					<a href="/site/posts/">
						<span>Posts</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/site/tags/">
						<span>Tags</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/site/categories/">
						<span>Categories</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/site/books/">
						<span>Books</span>
					</a>
				</li>
			 
		
	</ul>
</div>

        <section class="social">
	
	<a href="https://twitter.com/jimschubert" rel="me"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a>
	
	
	
	<a href="https://github.com/jimschubert" rel="me"><i class="fab fa-github fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	
	<a href="https://linkedin.com/in/jamesschubert" rel="me"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a>
	
	
	<a href="https://stackoverflow.com/users/151445" rel="me"><i class="fab fa-stack-overflow fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	
	
</section>

      </div>
    </div>
    
<div class="copyright">
  &copy; 2020 Jim Schubert
  
    <a href="https://creativecommons.org/licenses/by-sa/4.0">CC BY-SA 4.0</a>
  
</div>


<div class="builtwith">
Built with <a href="https://gohugo.io">Hugo</a> ❤️ <a href="https://github.com/htr3n/hyde-hyde">hyde-hyde</a>.
</div>


  </div>
</div>

        <div class="content container">
            
    
<article>
  <header>
    <h1>Getting started with jQuery plugins</h1>
    
    
<div class="post__meta">
    
    
      <i class="fas fa-calendar-alt"></i> Oct 14, 2012
    
    
    
      
      
          in
          
          
              <a class="badge badge-category" href="/site/categories/blog">BLOG</a>
              
          
      
    
    
    
      
      
          <br/>
           <i class="fas fa-tags"></i>
          
          <a class="badge badge-tag" href="/site/tags/examples">examples</a>
           
      
          <a class="badge badge-tag" href="/site/tags/javascript">javascript</a>
           
      
          <a class="badge badge-tag" href="/site/tags/jquery">jquery</a>
          
      
    
    
    <br/>
    <i class="fas fa-clock"></i> 6 min read
</div>


  </header>
  
  
  
  
  <div class="post">
    <p>jQuery plugins aren’t that difficult to write, but some folks seem to have a hard time understanding how to get started, so I thought I would write a quick blog post about that. I’ll show how to make a pretty simple keyword highlighter which also wraps your pre/code elements in a div with a header span element.</p>
<p>I’ve written a few jQuery plugins before. One of my favorites is <a href="https://github.com/jimschubert/jquery.empuzzle" title="jimschubert/jquery.empuzzle" target="_blank">jquery.empuzzle</a>. This is a favorite not only because it’s <a href="http://jimschubert.github.com/jquery.empuzzle/" title="Try out jquery.empuzzle" target="_blank">incredibly fun</a>, but because it covers a few areas of jquery plugin development:</p>
<ol>
<li>default options</li>
<li>merge options</li>
<li>custom selectors</li>
<li>plugin structure</li>
</ol>
<p>It also covers a particular gotcha when your plugin interacts with images (i.e. images may load after document ready is fired). It’s definitely worth checking it out, but I’d like to show a much simpler plugin here.</p>
<h2 id="the-structure">The structure</h2>
<p>jQuery plugins are commonly written as an *immediate function*. This is creates a closure which executes immediate on the jQuery object itself:</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="p">;(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// your plugin goes here.
</span><span class="c1"></span><span class="p">})(</span><span class="nx">jQuery</span><span class="p">);</span>
</code></pre></div><p>I often wrap a jQuery plugin in semicolons as you see above to prevent any <a href="http://bonsaiden.github.com/JavaScript-Garden/#core.semicolon" title="Semicolon insertion explained at JavaScript Garden" target="_blank">automatic semicolon insertion errors</a>. This is something I would consider a ‘best practice’ and I suggest you do the same.</p>
<p>Within this structure, you’ll want to extend jQuery to include your plugin’s code.</p>
<p>$.fn is a pointer to the jQuery prototype object. When you execute a jQuery call like this:</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">examples</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.test-elements&#39;</span><span class="p">);</span>
</code></pre></div><p>.. you will receive a jQuery object. This object represents an array of results matching the selector passed to the jQuery function. You can use <em>console.log()</em> from within your plugin function to see how you might interact with this object.</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="p">;(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">example</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">arg</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="p">};</span>
<span class="p">})(</span><span class="nx">jQuery</span><span class="p">);</span>
</code></pre></div><p>You now have the start to a plugin called ‘example’. You can execute this ‘plugin’ in the normal way.</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">examples</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.test-elements&#39;</span><span class="p">);</span>
<span class="nx">examples</span><span class="p">.</span><span class="nx">example</span><span class="p">();</span>

<span class="c1">// same as: $(&#39;.test-elements&#39;).example();
</span></code></pre></div><p>Now, you’ll want to iterate over each object found by the query selector and perform whatever functionality your plugin will provide. Let’s define some functionality so we can have a (somewhat) useful plugin. We’ll keep with the ‘example’ theme and write a plugin which stylizes a <code> tag and adds a small box in the top-left corner which says ‘Example’. (I got this idea from Twitter’s Bootstrap framework, <a href="http://twitter.github.com/bootstrap/base-css.html" title="Twitter Bootstrap on Github" target="_blank">see here</a>). We’ll also ‘highlight’ a few keywords within our example.</p>
<p>Here’s what we want our final product to look like (after some hideous styling, of course):</p>
<p><a href="https://www.ipreferjim.com/wp-content/uploads/2012/10/Selection_011.png"><img src="https://www.ipreferjim.com/wp-content/uploads/2012/10/Selection_011.png" alt="" title="Selection_011" width="430" height="114" class="aligncenter size-full wp-image-974" srcset="https://www.ipreferjim.com/wp-content/uploads/2012/10/Selection_011.png 430w, https://www.ipreferjim.com/wp-content/uploads/2012/10/Selection_011-300x79.png 300w" sizes="(max-width: 430px) 100vw, 430px" /></a></p>
<p>For the goal screenshot, I’ve used <a href="http://code.google.com/p/google-code-prettify/" title="Google Code prettify" target="_blank">Google’s prettify</a> plugin, which is licensed under <a href="http://www.apache.org/licenses/LICENSE-2.0" title="Apache 2.0 License" target="_blank">Apache 2.0</a>. I don’t use this in the final product.</p>
<p>There will be a few things we’ll need to do in this plugin:</p>
<ol>
<li>Merge settings specified by the user with our default settings</li>
<li>Wrap the code block in a styled ‘example’ box</li>
<li>“parse” the contents for a select set of keywords</li>
<li>Wrap any found keywords with a style span</li>
</ol>
<p>For the parsing bit, I’ll just use a global RegEx replace on the contents of the code element.</p>
<h2 id="providing-defaults">Providing defaults</h2>
<p>Providing defaults in a jQuery plugin and allowing a user to pass options to merge isn’t difficult. Your plugin function will accept a parameter I like to call ‘opts’ and return a `this.each` function. Within the `.each` function, you’ll extend the defaults object with those options passed into your plugin function and store the merged options into a new object called ‘options’. A very simple example which writes out to console.log might look like this:</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="p">;(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">defaults</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">arr</span><span class="o">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span>
        <span class="nx">sample</span><span class="o">:</span> <span class="s2">&#34;sample&#34;</span><span class="p">,</span>
        <span class="nx">style</span><span class="o">:</span> <span class="s2">&#34;style&#34;</span>
    <span class="p">};</span>

    <span class="kd">var</span> <span class="nx">example</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">opts</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="c1">// merge opts with defaults into new object
</span><span class="c1"></span>            <span class="c1">// so changes don&#39;t change defaults
</span><span class="c1"></span>            <span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">defaults</span><span class="p">,</span> <span class="nx">opts</span><span class="p">);</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">({</span> 
                <span class="nx">elem</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">innerText</span><span class="p">,</span>
                <span class="nx">options</span><span class="o">:</span> <span class="nx">options</span>
            <span class="p">});</span>
        <span class="p">});</span>
    <span class="p">};</span>

    <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">example</span> <span class="o">=</span> <span class="nx">example</span><span class="p">;</span>
<span class="p">})(</span><span class="nx">jQuery</span><span class="p">);</span>
</code></pre></div><p>Here are some options we might want to allow for the example plugin:</p>
<ol>
<li>A class name for the box and a class name for the label</li>
<li>An object mapping keywords to class names.</li>
<li>A parse error callback</li>
<li>A data attribute to specify a different ‘Example’ box text (so each element can define its own label)</li>
</ol>
<p>Our <em>defaults</em> object will look like this (more or less):</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">defaults</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">boxCss</span><span class="o">:</span> <span class="s2">&#34;example-box&#34;</span><span class="p">,</span>
	<span class="nx">labelCss</span><span class="o">:</span> <span class="s2">&#34;example-label&#34;</span><span class="p">,</span>
        <span class="nx">keywords</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&#34;function&#34;</span><span class="o">:</span><span class="s2">&#34;blue&#34;</span><span class="p">,</span> <span class="s2">&#34;this&#34;</span><span class="o">:</span><span class="s2">&#34;blue&#34;</span><span class="p">,</span> <span class="s2">&#34;jQuery&#34;</span><span class="o">:</span><span class="s2">&#34;red&#34;</span> <span class="p">},</span>
        <span class="nx">onError</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="p">},</span>
        <span class="nx">exampleAttr</span><span class="o">:</span> <span class="s2">&#34;&#34;</span>
    <span class="p">};</span>
</code></pre></div><h2 id="wrapping-our-targets">Wrapping our targets</h2>
<p>To make our lives simple, we’ll first wrap the target element with a div for our example box. Then, we’ll add a span just before the code block. We can improve performance by creating the wrapper div’s HTML outside of the ‘.each’ function. Because we’re allowing the option of pulling the labeling span’s text from the code element itself, we’ll have to build that HTML within the ‘.each’ function.</p>
<p>Here’s what we have so far.</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="p">;(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">defaults</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">boxCss</span><span class="o">:</span> <span class="s2">&#34;example-box&#34;</span><span class="p">,</span>
        <span class="nx">labelCss</span><span class="o">:</span> <span class="s2">&#34;example-label&#34;</span><span class="p">,</span>
        <span class="nx">keywords</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&#34;function&#34;</span><span class="o">:</span><span class="s2">&#34;blue&#34;</span><span class="p">,</span> <span class="s2">&#34;this&#34;</span><span class="o">:</span><span class="s2">&#34;blue&#34;</span><span class="p">,</span> <span class="s2">&#34;jQuery&#34;</span><span class="o">:</span><span class="s2">&#34;red&#34;</span> <span class="p">},</span>
        <span class="nx">onError</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="p">},</span>
        <span class="nx">exampleAttr</span><span class="o">:</span> <span class="s2">&#34;&#34;</span>
    <span class="p">};</span>

    <span class="kd">var</span> <span class="nx">example</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">opts</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">defaults</span><span class="p">,</span> <span class="nx">opts</span><span class="p">);</span>
        
        <span class="kd">var</span> <span class="nx">wrapperHtml</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;&lt;div class=&#34;&#39;</span><span class="p">,</span>
            <span class="nx">options</span><span class="p">.</span><span class="nx">boxCss</span><span class="p">,</span>
            <span class="s1">&#39;&#34;&gt;&lt;/div&gt;&#39;</span>
        <span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>

        <span class="kd">var</span> <span class="nx">labelArr</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;&lt;span class=&#34;&#39;</span><span class="p">,</span>
            <span class="nx">options</span><span class="p">.</span><span class="nx">labelCss</span><span class="p">,</span>
            <span class="s1">&#39;&#34;&gt;&#39;</span><span class="p">,</span>
            <span class="s2">&#34;Example&#34;</span><span class="p">,</span>
            <span class="s1">&#39;&lt;/span&gt;&#39;</span>
        <span class="p">];</span>

        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">labelText</span> <span class="o">=</span> <span class="s2">&#34;Example&#34;</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">exampleAttr</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">labelText</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">exampleAttr</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="kd">var</span> <span class="nx">labelHtml</span> <span class="o">=</span> <span class="p">[</span>
                <span class="s1">&#39;&lt;span class=&#34;&#39;</span><span class="p">,</span>
                <span class="nx">options</span><span class="p">.</span><span class="nx">labelCss</span><span class="p">,</span>
                <span class="s1">&#39;&#34;&gt;&#39;</span><span class="p">,</span>
                <span class="nx">labelText</span><span class="p">,</span>
                <span class="s1">&#39;&lt;/span&gt;&#39;</span>
            <span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>

            <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">wrap</span><span class="p">(</span><span class="nx">wrapperHtml</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">before</span><span class="p">(</span><span class="nx">labelHtml</span><span class="p">);</span>
        <span class="p">});</span>
    <span class="p">};</span>

    <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">example</span> <span class="o">=</span> <span class="nx">example</span><span class="p">;</span>
<span class="p">})(</span><span class="nx">jQuery</span><span class="p">);</span>
</code></pre></div><h2 id="onerror-function">onError function</h2>
<p>The onError function we allow in the options object does nothing more than provide a message if we don’t have a code element to update with keyword highlights. We will supply a message to the callback function and return from the current iteration of ‘.each’. This goes at the beginning of the ‘this.each’ function.</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="c1">// Find node for replacing text.
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">replacementNode</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">children</span><span class="p">(</span><span class="s1">&#39;code&#39;</span><span class="p">).</span><span class="nx">andSelf</span><span class="p">().</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;code&#39;</span><span class="p">);</span>

<span class="k">if</span><span class="p">(</span><span class="nx">replacementNode</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">options</span><span class="p">.</span><span class="nx">onError</span> <span class="o">===</span> <span class="s2">&#34;function&#34;</span><span class="p">){</span>
        <span class="nx">options</span><span class="p">.</span><span class="nx">onError</span><span class="p">(</span><span class="s2">&#34;No code nodes found&#34;</span><span class="p">);</span>
    <span class="p">}</span>
    
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><p>With the combination of children/andSelf/filter in the above code, we allow the plugin to operate on both ‘pre’ and ‘code’ elements.</p>
<p>When allowing users to pass functions as callbacks or to provide added functionality to a plugin, *always* check that it is a function.</p>
<h2 id="8220parsing8221-contents">“Parsing” contents</h2>
<p>In the interest of saving some time, I’m going to use a regular expression to replace text within the code block. This isn’t necessarily the most efficient way to achieve a budget syntax highlighter, but it will work.</p>
<p>To do this, we’ll need to grab the text from our code node in which we’ll replace keywords. Then, for every keyword in the hash of keywords-to-classes, we’ll create a span to represent the highlighted keyword. Then, we’ll do a search and replace using a global regular expression object, substituting each found keyword with the keyword wrapped in a span element. This goes at the end of the ‘this.each’ function.</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">originalText</span> <span class="o">=</span> <span class="nx">replacementNode</span><span class="p">.</span><span class="nx">text</span><span class="p">();</span>
            
    <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">keywords</span><span class="p">).</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span><span class="nx">idx</span><span class="p">){</span>
        <span class="kd">var</span> <span class="nx">replacement</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;&lt;span class=&#34;&#39;</span><span class="p">,</span>
            <span class="nx">options</span><span class="p">.</span><span class="nx">keywords</span><span class="p">[</span><span class="nx">key</span><span class="p">],</span>
            <span class="s1">&#39;&#34;&gt;&#39;</span><span class="p">,</span>
            <span class="nx">key</span><span class="p">,</span>
            <span class="s1">&#39;&lt;/span&gt;&#39;</span>
        <span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
        
        <span class="kd">var</span> <span class="nx">re</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span><span class="s2">&#34;g&#34;</span><span class="p">);</span>
        <span class="nx">originalText</span> <span class="o">=</span> <span class="nx">originalText</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">re</span><span class="p">,</span> <span class="nx">replacement</span><span class="p">);</span>
    <span class="p">});</span>
</code></pre></div><p>The only thing left to do is to add styles to your document and you’re all set with a customized syntax highlighter!</p>
<p>There are a few issues with this simple implementation. First, keywords don’t get merged (I’ll leave that as an exercise for you). Second, this only highlights keywords. It doesn’t provide regex matching for full-text highlights. In other words, this won’t highlight comments.</p>
<p>If you’re unfamiliar with jQuery plugins, or you’re planning to begin writing a keyword highlighter plugin, this should at least get you started!</p>
<h2 id="try-it-out">Try it out!</h2>
<p>Check out the <a href="http://jsfiddle.net/jimschubert/ScvZW/" title="An example on jsfiddle" target="_blank">jsfiddle</a>.</p>
<iframe style="width: 100%; height: 300px" src="https://jsfiddle.net/jimschubert/ScvZW/embedded/" allowfullscreen="allowfullscreen" frameborder="0"></iframe>
<h2 id="get-the-code">Get the code</h2>
<p>The code for this blog post is <a href="https://github.com/jimschubert/blogs/tree/master/2012-10-13" title="Code for this post is available on Github" target="_blank">available on Github</a>.</p>

  </div>
  

<div class="navigation navigation-single">
    
    <a href="/site/2012/10/drawing-a-custom-html5-shape/" class="navigation-prev">
      <i aria-hidden="true" class="fa fa-chevron-left"></i>
      <span class="navigation-tittle">Drawing a custom HTML5 shape</span>
    </a>
    
    
    <a href="/site/2012/10/generating-sprites-with-html5-canvas-node-canvas/" class="navigation-next">
      <span class="navigation-tittle">Generating sprites with HTML5 canvas (node-canvas)</span>
      <i aria-hidden="true" class="fa fa-chevron-right"></i>
    </a>
    
</div>


  


<div class="post__related">
    
    <h2>Related Articles</h2>
    <ul class="related-posts">
        
<li>
  <span class="list__title--small">
    <a href="/site/2011/08/posting-complex-models-to-asp-net-mvc/" >Posting complex models to ASP.NET MVC</a>
      
      <time class="pull-right hidden-tablet">Aug 16, 2011</time>
      
  </span>
</li>

<li>
  <span class="list__title--small">
    <a href="/site/2011/08/jquery-empuzzle-github/" >jquery.empuzzle @github</a>
      
      <time class="pull-right hidden-tablet">Aug 8, 2011</time>
      
  </span>
</li>

<li>
  <span class="list__title--small">
    <a href="/site/2011/06/loading-newer-versions-of-jquery-and-jquery-ui-noconflict/" >Loading newer versions of jQuery and jQuery UI (noConflict)</a>
      
      <time class="pull-right hidden-tablet">Jun 18, 2011</time>
      
  </span>
</li>

<li>
  <span class="list__title--small">
    <a href="/site/2011/02/jquery-pocket-reference-by-david-flanagan/" >jQuery Pocket Reference by David Flanagan</a>
      
      <time class="pull-right hidden-tablet">Feb 8, 2011</time>
      
  </span>
</li>

<li>
  <span class="list__title--small">
    <a href="/site/2010/06/fairly-accurate-javascript-browser-detection/" >Fairly Accurate JavaScript Browser Detection</a>
      
      <time class="pull-right hidden-tablet">Jun 12, 2010</time>
      
  </span>
</li>


    </ul>
</div>



  
    


</article>


        </div>
        
    

<script defer src="https://use.fontawesome.com/releases/v5.11.2/js/all.js" integrity="sha384-b3ua1l97aVGAPEIe48b4TC60WUQbQaGi2jqAWM90y0OZXZeyaTCWtBTKtjW2GXG1" crossorigin="anonymous"></script>


    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
        
    <script type="text/javascript">
        
        hljs.initHighlightingOnLoad();
    </script>
    





    



    </body>
</html>
