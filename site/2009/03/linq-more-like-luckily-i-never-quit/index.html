<!DOCTYPE html>
<html lang="en">
    
    


    <head>
    <link href="https://gmpg.org/xfn/11" rel="profile">
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Cache-Control" content="public" />
<!-- Enable responsiveness on mobile devices -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="generator" content="Hugo 0.72.0" />

    
    
    

<title>LINQ: more like &#34;Luckily I Never Quit&#34; • I Prefer Jim</title>


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="LINQ: more like &#34;Luckily I Never Quit&#34;"/>
<meta name="twitter:description" content="I’ve been using LINQ quite a bit lately. As the blog title says: luckily, I never quit.
There are a lot of things to get used to with LINQ."/>

<meta property="og:title" content="LINQ: more like &#34;Luckily I Never Quit&#34;" />
<meta property="og:description" content="I’ve been using LINQ quite a bit lately. As the blog title says: luckily, I never quit.
There are a lot of things to get used to with LINQ." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.ipreferjim.com/site/2009/03/linq-more-like-luckily-i-never-quit/" />
<meta property="article:published_time" content="2009-03-28T17:07:00+00:00" />
<meta property="article:modified_time" content="2009-03-28T17:07:00+00:00" /><meta property="og:site_name" content="I Prefer Jim" />


    


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">








<link rel="stylesheet" href="/site/scss/hyde-hyde.1d734ca591261200417c9d5de423a667cc5271b6576cc2ea477fce0dd8c628d0.css" integrity="sha256-HXNMpZEmEgBBfJ1d5COmZ8xScbZXbMLqR3/ODdjGKNA=">


<link rel="stylesheet" href="/site/scss/print.2744dcbf8a0b2e74f8a50e4b34e5f441be7cf93cc7de27029121c6a09f9e77bc.css" integrity="sha256-J0Tcv4oLLnT4pQ5LNOX0Qb58&#43;TzH3icCkSHGoJ&#43;ed7w=" media="print">




<link rel="stylesheet" href="/site/scss/hugo-toc.11a9185f83b7761946f8d16ae214f4d959edaf003337338e55935920cc7852d7.css" integrity="sha256-EakYX4O3dhlG&#43;NFq4hT02VntrwAzNzOOVZNZIMx4Utc=">



    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="/favicon.png">
    
    

</head>


    <body class=" ">
    
<div class="sidebar">
  <div class="container ">
    <div class="sidebar-about">
      <span class="site__title">
        <a href="https://www.ipreferjim.com/site/">I Prefer Jim</a>
      </span>
      
      
        <div class="author-image">
          <img src="https://www.gravatar.com/avatar/466dc28e15028c7353552022d2de1f9e?s=240&d=mp" class="img--circle img--headshot element--center" alt="gravatar">
        </div>
      
      <p class="site__description">
        
      </p>
    </div>
    <div class="collapsible-menu">
      <input type="checkbox" id="menuToggle">
      <label for="menuToggle">I Prefer Jim</label>
      <div class="menu-content">
        <div>
	<ul class="sidebar-nav">
		 
		 
			 
				<li>
					<a href="/site/posts/">
						<span>Posts</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/site/tags/">
						<span>Tags</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/site/categories/">
						<span>Categories</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/site/books/">
						<span>Books</span>
					</a>
				</li>
			 
		
	</ul>
</div>

        <section class="social">
	
	<a href="https://twitter.com/jimschubert" rel="me"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a>
	
	
	
	<a href="https://github.com/jimschubert" rel="me"><i class="fab fa-github fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	
	<a href="https://linkedin.com/in/jamesschubert" rel="me"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a>
	
	
	<a href="https://stackoverflow.com/users/151445" rel="me"><i class="fab fa-stack-overflow fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	
	
</section>

      </div>
    </div>
    
<div class="copyright">
  &copy; 2020 Jim Schubert
  
    <a href="https://creativecommons.org/licenses/by-sa/4.0">CC BY-SA 4.0</a>
  
</div>


<div class="builtwith">
Built with <a href="https://gohugo.io">Hugo</a> ❤️ <a href="https://github.com/htr3n/hyde-hyde">hyde-hyde</a>.
</div>


  </div>
</div>

        <div class="content container">
            
    
<article>
  <header>
    <h1>LINQ: more like &#34;Luckily I Never Quit&#34;</h1>
    
    
<div class="post__meta">
    
    
      <i class="fas fa-calendar-alt"></i> Mar 28, 2009
    
    
    
      
      
          in
          
          
              <a class="badge badge-category" href="/site/categories/blog">BLOG</a>
              •
          
              <a class="badge badge-category" href="/site/categories/code">CODE</a>
              
          
      
    
    
    
      
      
          <br/>
           <i class="fas fa-tags"></i>
          
          <a class="badge badge-tag" href="/site/tags/linq">linq</a>
           
      
          <a class="badge badge-tag" href="/site/tags/rant">rant</a>
          
      
    
    
    <br/>
    <i class="fas fa-clock"></i> 3 min read
</div>


  </header>
  
  
  
  
  <div class="post">
    <p>I’ve been using LINQ quite a bit lately. As the blog title says: luckily, I never quit.</p>
<p>There are a lot of things to get used to with LINQ. For one, it uses deferred queries. When you make a change, you must submit changes before the change is reflected in the database. Yes, this mirrors the actions when working directly with a database (COMMIT), but when you’re thinking of it as application logic, it seems counter-intuitive.</p>
<div class="highlight"><pre class="chroma"><code class="language-xml" data-lang="xml"><span class="nt">&lt;aside&gt;</span>
</code></pre></div><p>At school, I’m in a class called INFO 465: Projects in Information Systems. The class is slow-going. At VCU, there are three tracks of studies in Information Systems: Application Development, Business Analysis, and Network Administration. Unfortunately, most of the people in BA and Networking are there because they don’t want to do any programming at all. You would think a class geared to using your course skills would accommodate each track equally?</p>
<p>That’s not the case in this class. There are two projects. One is individual work and the other is group work. The individual project is really just a large programming assignment to create an “Enterprise System” for a landscaping company. Luckily, the company consists of the landscaper, a truck, and his helper.</p>
<p>Anyway, to get back on track, we’re allowed to do our project any way we want. Most of the people in the class chose to do Windows Forms using VB.NET examples provided by the teacher. Good luck with that! I chose to use ASP.NET, AJAX, Web Services, and LINQ. I chose this route because I wanted this class to be a learning experience, not just a copy-paste session for 3 hours a week.</p>
<div class="highlight"><pre class="chroma"><code class="language-xml" data-lang="xml"><span class="nt">&lt;/aside&gt;</span>
</code></pre></div><p>Back to LINQ. To be quick about development, I’ve decided to use GridViews, DetailsViews, and LinqDataSources. Every time I try to link a LinqDataSource to a GridView’s selected key, I get this message:</p>
<div class="highlight"><pre class="chroma"><code class="language-xml" data-lang="xml">Operator &#39;==&#39; incompatible with operand types &#39;Int32&#39; and &#39;Object&#39;
</code></pre></div><p>Here is an example of the LinqDataSource that throws this error:</p>
<div class="highlight"><pre class="chroma"><code class="language-xml" data-lang="xml"><span class="nt">&lt;asp:LinqDataSource</span> <span class="na">ID=</span><span class="s">&#34;srcSelectedOrder&#34;</span> <span class="na">runat=</span><span class="s">&#34;server&#34;</span>
        <span class="na">ContextTypeName=</span><span class="s">&#34;INFO465_First_Web.DatabaseMaps.OrdersDataContext&#34;</span>
        <span class="na">EnableDelete=</span><span class="s">&#34;True&#34;</span> <span class="na">EnableInsert=</span><span class="s">&#34;True&#34;</span> <span class="na">EnableUpdate=</span><span class="s">&#34;True&#34;</span> <span class="na">TableName=</span><span class="s">&#34;Orders&#34;</span>
        <span class="na">Where=</span><span class="s">&#34;Id == @Id&#34;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;WhereParameters&gt;</span>
            <span class="nt">&lt;asp:ControlParameter</span> <span class="na">ControlID=</span><span class="s">&#34;GridView1&#34;</span> <span class="na">Name=</span><span class="s">&#34;Id&#34;</span>
                <span class="na">PropertyName=</span><span class="s">&#34;SelectedValue&#34;</span> <span class="na">Type=</span><span class="s">&#34;Int32&#34;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/WhereParameters&gt;</span>
    <span class="nt">&lt;/asp:LinqDataSource&gt;</span>
</code></pre></div><p>The problem is where you have the Where clause “Id == @Id”. For some reason, the data source thinks @Id is an object instead of an Int32, even though Type=”Int32″ in the WhereParameters.</p>
<p>The fix is the change this to Where=”Id == Int32?(@Id)”. I don’t know why this is. I mean, if you’re taking a primary key as the DataKeyName, it is being passed as Int32 in the WhereParameters, why do you have to cast it? Maybe the LinqDataSource automatically converts Id == @Id to an SQL query that would look like “Id == ‘2’”, and you have to cast to Int32 explicitly so it will look like “Id == 2” in the query? Again, this is another place that LINQ just seems backwards.</p>
<p>Here is the fixed data source:</p>
<div class="highlight"><pre class="chroma"><code class="language-xml" data-lang="xml"><span class="nt">&lt;asp:LinqDataSource</span> <span class="na">ID=</span><span class="s">&#34;srcSelectedOrder&#34;</span> <span class="na">runat=</span><span class="s">&#34;server&#34;</span>
        <span class="na">ContextTypeName=</span><span class="s">&#34;INFO465_First_Web.DatabaseMaps.OrdersDataContext&#34;</span>
        <span class="na">EnableDelete=</span><span class="s">&#34;True&#34;</span> <span class="na">EnableInsert=</span><span class="s">&#34;True&#34;</span> <span class="na">EnableUpdate=</span><span class="s">&#34;True&#34;</span> <span class="na">TableName=</span><span class="s">&#34;Orders&#34;</span>
        <span class="na">Where=</span><span class="s">&#34;Id == Int32?(@Id)&#34;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;WhereParameters&gt;</span>
            <span class="nt">&lt;asp:ControlParameter</span> <span class="na">ControlID=</span><span class="s">&#34;GridView1&#34;</span> <span class="na">Name=</span><span class="s">&#34;Id&#34;</span>
                <span class="na">PropertyName=</span><span class="s">&#34;SelectedValue&#34;</span> <span class="na">Type=</span><span class="s">&#34;Int32&#34;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/WhereParameters&gt;</span>
    <span class="nt">&lt;/asp:LinqDataSource&gt;</span>
</code></pre></div><p>(I always format my code with <a href="http://www.manoli.net/csharpformat/">http://www.manoli.net/csharpformat/</a>)</p>

  </div>
  

<div class="navigation navigation-single">
    
    <a href="/site/2009/03/c-templated-quicksort-algorithm/" class="navigation-prev">
      <i aria-hidden="true" class="fa fa-chevron-left"></i>
      <span class="navigation-tittle">C&#43;&#43; Templated QuickSort Algorithm</span>
    </a>
    
    
    <a href="/site/2009/04/t-sql-multi-table-delete/" class="navigation-next">
      <span class="navigation-tittle">T-SQL Multi-Table Delete</span>
      <i aria-hidden="true" class="fa fa-chevron-right"></i>
    </a>
    
</div>


  




  
    


</article>


        </div>
        
    

<script defer src="https://use.fontawesome.com/releases/v5.11.2/js/all.js" integrity="sha384-b3ua1l97aVGAPEIe48b4TC60WUQbQaGi2jqAWM90y0OZXZeyaTCWtBTKtjW2GXG1" crossorigin="anonymous"></script>


    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
        
    <script type="text/javascript">
        
        hljs.initHighlightingOnLoad();
    </script>
    





    



    </body>
</html>
